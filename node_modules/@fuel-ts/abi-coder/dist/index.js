var K=Object.defineProperty;var he=Object.getOwnPropertyDescriptor;var ge=Object.getOwnPropertyNames;var be=Object.prototype.hasOwnProperty;var Te=(n,r)=>{for(var e in r)K(n,e,{get:r[e],enumerable:!0})},Ce=(n,r,e,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of ge(r))!be.call(n,o)&&o!==e&&K(n,o,{get:()=>r[o],enumerable:!(t=he(r,o))||t.enumerable});return n};var xe=n=>Ce(K({},"__esModule",{value:!0}),n);var H=(n,r,e)=>{if(!r.has(n))throw TypeError("Cannot "+e)};var A=(n,r,e)=>(H(n,r,"read from private field"),e?e.call(n):r.get(n)),w=(n,r,e)=>{if(r.has(n))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(n):r.set(n,e)},L=(n,r,e,t)=>(H(n,r,"write to private field"),t?t.call(n,e):r.set(n,e),e);var re=(n,r,e)=>(H(n,r,"access private method"),e);var Fe={};Te(Fe,{AbiCoder:()=>g,ArrayCoder:()=>O,B256Coder:()=>I,BooleanCoder:()=>f,ByteCoder:()=>V,Coder:()=>i,EnumCoder:()=>E,Fragment:()=>$,FunctionFragment:()=>b,Interface:()=>T,NumberCoder:()=>y,StringCoder:()=>F,StructCoder:()=>D,TupleCoder:()=>h,filterEmptyParams:()=>k,isReferenceType:()=>X});module.exports=xe(Fe);var te=require("@ethersproject/logger"),Ae=new te.Logger("0.0.0-master-65ffe7f"),i=class{constructor(r,e,t){this.name=r,this.type=e,this.encodedLength=t}throwError(r,e){throw Ae.throwArgumentError(r,this.name,e),new Error("unreachable")}};var oe=require("@ethersproject/bytes");var O=class extends i{constructor(e,t){super("array",`[${e.type}; ${t}]`,t*e.encodedLength);this.coder=e,this.length=t}encode(e){return Array.isArray(e)||this.throwError("expected array value",e),this.length!==e.length&&this.throwError("Types/values length mismatch",e),(0,oe.concat)(Array.from(e).map(t=>this.coder.encode(t)))}decode(e,t){let o=t;return[Array(this.length).fill(0).map(()=>{let d;return[d,o]=this.coder.decode(e,o),d}),o]}};var J=require("@ethersproject/bytes"),ne=require("@fuel-ts/math");var I=class extends i{constructor(){super("b256","b256",32)}encode(r){let e;try{e=(0,J.arrayify)(r)}catch{this.throwError(`Invalid ${this.type}`,r)}return e.length!==32&&this.throwError(`Invalid ${this.type}`,r),e}decode(r,e){let t=r.slice(e,e+32);return(0,ne.toBigInt)(t)===0n&&(t=new Uint8Array(32)),t.length!==32&&this.throwError("Invalid size for b256",t),[(0,J.hexlify)(t),e+32]}};var se=require("@ethersproject/bytes"),N=require("@fuel-ts/math");var f=class extends i{constructor(){super("boolean","boolean",8)}encode(r){let e;try{e=(0,N.toArray)(r?1:0)}catch{this.throwError("Invalid bool",r)}return e.length>1&&this.throwError("Invalid bool",r),(0,se.zeroPad)(e,8)}decode(r,e){let t=(0,N.toBigInt)(r.slice(e,e+8));return t===0n?[!1,e+8]:(t!==1n&&this.throwError("Invalid boolean value",t),[!0,e+8])}};var de=require("@ethersproject/bytes"),M=require("@fuel-ts/math");var V=class extends i{constructor(){super("byte","byte",8)}encode(r){let e;try{e=(0,M.toArray)(r)}catch{this.throwError("Invalid Byte",r)}return e.length>1&&this.throwError("Invalid Byte",r),(0,de.zeroPad)(e,8)}decode(r,e){let t=r.slice(e,e+8),o=(0,M.toBigInt)(t);return o>255n&&this.throwError("Invalid Byte",o),[Number(o),e+8]}};var ce=require("@ethersproject/bytes");var ie=require("@ethersproject/bytes"),R=require("@fuel-ts/math");var z,ae,y=class extends i{constructor(e){super("number",e,8);w(this,z);switch(this.baseType=e,e){case"u8":this.length=1;break;case"u16":this.length=2;break;case"u32":this.length=4;break;case"u64":default:this.length=8;break}}encode(e){let t;try{t=(0,R.toArray)(e)}catch{this.throwError(`Invalid ${this.baseType}`,e)}return t.length>this.length&&this.throwError(`Invalid ${this.baseType}`,e),(0,ie.zeroPad)(t,8)}decode(e,t){let[o,s]=re(this,z,ae).call(this,e,t);return this.baseType==="u64"?[o,s]:[(0,R.toNumber)(o),s]}};z=new WeakSet,ae=function(e,t){let o=e.slice(t,t+8);return o=o.slice(8-this.length,8),[(0,R.toBigInt)(o),t+8]};var v,U,E=class extends i{constructor(e,t){let o=new y("u64"),s=Object.values(t).reduce((d,a)=>Math.max(d,a.encodedLength),0);super("enum",`enum ${e}`,o.encodedLength+s);w(this,v,void 0);w(this,U,void 0);this.name=e,this.coders=t,L(this,v,o),L(this,U,s)}encode(e){let[t,...o]=Object.keys(e);if(!t)throw new Error("A field for the case must be provided");if(o.length!==0)throw new Error("Only one field must be provided");let s=this.coders[t],d=Object.keys(this.coders).indexOf(t),a=s.encode(e[t]),p=new Uint8Array(A(this,U)-s.encodedLength);return(0,ce.concat)([A(this,v).encode(d),p,a])}decode(e,t){let o=t,s;[s,o]=new y("u64").decode(e,o);let d=s,a=Object.keys(this.coders)[Number(d)];if(!a)throw new Error(`Invalid caseIndex "${d}". Valid cases: ${Object.keys(this.coders)}`);let p=this.coders[a];return o+=A(this,U)-p.encodedLength,[s,o]=p.decode(e,o),[{[a]:s},o]}};v=new WeakMap,U=new WeakMap;var ue=require("@ethersproject/bytes"),S=require("@ethersproject/strings");var B,F=class extends i{constructor(e){let t=(8-e)%8;t=t<0?t+8:t;super("string",`str[${e}]`,e+t);w(this,B,void 0);this.length=e,L(this,B,t)}encode(e){let t=(0,S.toUtf8Bytes)(e.slice(0,this.length)),o=new Uint8Array(A(this,B));return(0,ue.concat)([t,o])}decode(e,t){let o=e.slice(t,t+this.length),s=(0,S.toUtf8String)(o),d=A(this,B);return[s,t+this.length+d]}};B=new WeakMap;var pe=require("@ethersproject/bytes");var D=class extends i{constructor(e,t){let o=Object.values(t).reduce((s,d)=>s+d.encodedLength,0);super("struct",`struct ${e}`,o);this.name=e,this.coders=t}encode(e){let t=Object.keys(this.coders).map(o=>{let s=this.coders[o],d=e[o];return s.encode(d)});return(0,pe.concat)(t)}decode(e,t){let o=t;return[Object.keys(this.coders).reduce((d,a)=>{let p=this.coders[a],C;return[C,o]=p.decode(e,o),d[a]=C,d},{}),o]}};var me=require("@ethersproject/bytes");var h=class extends i{constructor(e){let t=e.reduce((o,s)=>o+s.encodedLength,0);super("tuple",`(${e.map(o=>o.type).join(", ")})`,t);this.coders=e}encode(e){return this.coders.length!==e.length&&this.throwError("Types/values length mismatch",{value:e}),(0,me.concat)(this.coders.map((t,o)=>t.encode(e[o])))}decode(e,t){let o=t;return[this.coders.map(d=>{let a;return[a,o]=d.decode(e,o),a}),o]}};function k(n){return n.filter(r=>(r==null?void 0:r.type)!=="()"&&r!=="()")}var $=class{constructor(r){this.inputs=[];this.outputs=[];this.type=r.type,this.name=r.name,this.inputs=r.inputs,this.outputs=r.outputs}};var j=require("@ethersproject/abi");var ye=require("@ethersproject/bytes"),G=require("@ethersproject/logger");var we=/str\[(?<length>[0-9]+)\]/,Q=/\[(?<item>[\w\s]+);\s*(?<length>[0-9]+)\]/,W=/^struct (?<name>\w+)$/,Oe=/^enum (?<name>\w+)$/,Ie=/^\((?<items>.*)\)$/,q=new G.Logger("0.0.0-master-65ffe7f"),g=class{constructor(){q.checkNew(new.target,g)}getCoder(r){var a,p,C,P,_,ee;switch(r.type){case"u8":case"u16":case"u32":case"u64":return new y(r.type);case"bool":return new f;case"byte":return new V;case"b256":return new I;default:}let e=(a=we.exec(r.type))==null?void 0:a.groups;if(e){let l=parseInt(e.length,10);return new F(l)}let t=(p=Q.exec(r.type))==null?void 0:p.groups;if(t){let l=parseInt(t.length,10),m=(C=r.components)==null?void 0:C[0];if(!m)throw new Error("Expected array type to have an item component");let x=this.getCoder(m);return new O(x,l)}let o=(P=W.exec(r.type))==null?void 0:P.groups;if(o&&Array.isArray(r.components)){let l=r.components.reduce((m,x)=>(m[x.name]=this.getCoder(x),m),{});return new D(o.name,l)}let s=(_=Oe.exec(r.type))==null?void 0:_.groups;if(s&&Array.isArray(r.components)){let l=r.components.reduce((m,x)=>(m[x.name]=this.getCoder(x),m),{});return new E(s.name,l)}if(((ee=Ie.exec(r.type))==null?void 0:ee.groups)&&Array.isArray(r.components)){let l=r.components.map(m=>this.getCoder(m));return new h(l)}return q.throwArgumentError("Invalid type","type",r.type)}encode(r,e){let t=k(r);Array.isArray(e)&&t.length!==e.length&&q.throwError("Types/values length mismatch",G.Logger.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:r,values:e}});let o=t.map(d=>this.getCoder(d));return new h(o).encode(e)}decode(r,e){let t=(0,ye.arrayify)(e),o=k(r),s=P=>{P!==t.length&&q.throwError("Types/values length mismatch",G.Logger.errors.INVALID_ARGUMENT,{count:{types:o.length,values:t.length},value:{types:o,bytes:t}})};if(r.length===0||o.length===0){s(t.length?8:0);return}let d=o.map(P=>this.getCoder(P)),a=new h(d),[p,C]=a.decode(t,0);return s(C),p}};function Ve(n){var r,e;if(!n||n===j.FormatTypes.sighash){if((r=W.exec(this.type))==null?void 0:r.groups)return`s${this.format(n)}`;let o=(e=Q.exec(this.type))==null?void 0:e.groups;if(o)return`[${o.item}; ${o.length}]`}return this.format(n)}var b=class extends ${static fromObject(r){let{inputs:e=[],outputs:t=[]}=r,o={type:"function",name:r.name,inputs:e.map(j.ParamType.fromObject),outputs:t.map(j.ParamType.fromObject)};return new b(o)}format(){let r=this.inputs.map(e=>Ve.call(e));return`${this.name}(${r.join(",")})`}};var u=require("@ethersproject/bytes"),le=require("@ethersproject/logger"),fe=require("@ethersproject/sha2"),Z=require("@ethersproject/strings");var X=n=>{switch(n){case"u8":case"u16":case"u32":case"u64":case"bool":return!1;default:return!0}};var Y=new le.Logger("0.0.0-master-65ffe7f"),Ee=n=>{let r=[];return n.forEach(e=>{e.type==="function"&&r.push(b.fromObject(e))}),r},T=class{constructor(r){this.fragments=Ee(r),this.abiCoder=new g,this.functions={},this.fragments.forEach(e=>{let t={};switch(e.type){case"function":t=this.functions;break;default:return}let o=e.format();if(t[o]){Y.warn(`duplicate definition - ${o}`);return}t[o]=e})}static getSighash(r){let e=typeof r=="string"?(0,Z.toUtf8Bytes)(r):(0,Z.toUtf8Bytes)(r.format());return(0,u.concat)([new Uint8Array(4),(0,u.arrayify)((0,fe.sha256)(e)).slice(0,4)])}getFunction(r){if(this.functions[r])return this.functions[r];let e=Object.values(this.functions).find(t=>(0,u.hexlify)(T.getSighash(t))===r||t.name===r);return e||Y.throwArgumentError(`function ${r} not found.`,"data",e)}decodeFunctionData(r,e){let t=typeof r=="string"?this.getFunction(r):r,o=(0,u.arrayify)(e);return(0,u.hexlify)(o.slice(0,8))!==(0,u.hexlify)(T.getSighash(t))&&Y.throwArgumentError(`data signature does not match function ${t.name}.`,"data",(0,u.hexlify)(o)),this.abiCoder.decode(t.inputs,o.slice(16))}encodeFunctionData(r,e){let t=typeof r=="string"?this.getFunction(r):r;if(!t)throw new Error("Fragment not found");let o=T.getSighash(t),s=k(t.inputs);if(s.length===0)return o;let d=s.length>1||X(s[0].type),a=this.abiCoder.encode(s,e);return(0,u.concat)([o,new f().encode(d),a])}decodeFunctionResult(r,e){let t=typeof r=="string"?this.getFunction(r):r,o=(0,u.arrayify)(e);return this.abiCoder.decode(t.outputs,o)}encodeFunctionResult(r,e){let t=typeof r=="string"?this.getFunction(r):r;if(!t)throw new Error("Fragment not found");return this.abiCoder.encode(t.outputs,e)}};0&&(module.exports={AbiCoder,ArrayCoder,B256Coder,BooleanCoder,ByteCoder,Coder,EnumCoder,Fragment,FunctionFragment,Interface,NumberCoder,StringCoder,StructCoder,TupleCoder,filterEmptyParams,isReferenceType});
//# sourceMappingURL=index.js.map